"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),$="--vc-auto-duration",q=`height var(${$}) cubic-bezier(0.33, 1, 0.68, 1)`,v={padding:0,border:0,margin:0};function w(n){return{height:`${(n==null?void 0:n.scrollHeight)??0}px`}}function C(n){if(!n)return{};const{transition:u}=getComputedStyle(n);return u==="all 0s ease 0s"?{transition:q}:{transition:u}}function b(n){if(!n)return!0;const{transition:u}=getComputedStyle(n);return window.matchMedia("(prefers-reduced-motion: reduce)").matches||u.includes("none")||u.includes("height 0s")}e.defineComponent({inheritAttrs:!0});const A=e.defineComponent({__name:"Collapse",props:{when:{type:Boolean},baseHeight:{default:0},as:{default:"div"}},emits:["collapse","expand","collapsed","expanded"],setup(n,{emit:u}){const d=n,o=e.toRef(d,"when"),i=e.toRef(d,"baseHeight"),c=e.computed(()=>({overflow:"hidden",height:`${i.value}px`})),p=e.computed(()=>({...v,...i.value===0?{display:"none"}:c.value})),t=e.ref(null),r=e.ref(o.value?"expanded":"collapsed"),a=e.shallowRef(o.value?v:p.value),h=e.ref(0),f=e.computed(()=>({[$]:`${h.value}ms`}));function m(){t.value&&(o.value||i.value>0)&&(h.value=function(l=0){if(l===0)return 0;const s=l/36;return Math.round(10*(4+15*s**.25+s/5))}(t.value.scrollHeight-i.value))}function g(){a.value=v,r.value="expanded",u("expanded")}function y(){a.value=p.value,r.value="collapsed",u("collapsed")}function S(l){var s,x;l.target===t.value&&l.propertyName==="height"&&(o.value?((s=t.value)==null?void 0:s.scrollHeight)===parseFloat(l.target.style.height)&&g():((x=t.value)==null?void 0:x.style.height)===`${i.value}px`&&y())}return e.onMounted(m),e.watch(o,l=>{if(l){if(b(t.value))return g();a.value={...v,...c.value,willChange:"height"},requestAnimationFrame(()=>{m(),a.value={...a.value,...f.value},requestAnimationFrame(()=>{a.value={...a.value,...w(t.value),...C(t.value)},r.value="expanding",u("expand")})})}else{if(b(t.value))return y();requestAnimationFrame(()=>{a.value={...a.value,...f.value,...w(t.value),willChange:"height"},requestAnimationFrame(()=>{a.value={...a.value,...c.value,...C(t.value)},r.value="collapsing",u("collapse")})})}}),e.watch(i,l=>{o.value||(a.value={...a.value,transitionDuration:"0s",height:`${l}px`})}),(l,s)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(d.as),{ref_key:"collapseRef",ref:t,style:e.normalizeStyle(a.value),onTransitionend:S,"data-collapse":r.value},{default:e.withCtx(()=>[e.renderSlot(l.$slots,"default",e.normalizeProps(e.guardReactiveProps({state:r.value})))]),_:3},40,["style","data-collapse"]))}});exports.Collapse=A;
