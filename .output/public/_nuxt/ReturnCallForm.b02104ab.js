import{a as C,e as x,b as v,u as I}from"./entry.79df3faa.js";import{m as c,F as u,H as t,aa as O,y as p,N as M,I as a,Q as _,R as l,J as f,L as k,a5 as q,x as y,U as B,V as N}from"./swiper-vue.27e78005.js";import{_ as j}from"./nuxt-link.27a9c7c3.js";import{a as F,c as L}from"./state.73f9c402.js";import{U as T}from"./maska.b0acde3f.js";import{v as P}from"./validate.359f59e0.js";import{_ as w}from"./expand.bca86c69.js";const R={},V={width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},H=t("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),E=t("path",{d:"M30 18L18 30","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),J=t("path",{d:"M18 18L30 30","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),U=[H,E,J];function W(e,s){return c(),u("svg",V,U)}const z=C(R,[["render",W]]);const A={directives:{maska:T},props:{title:{type:String,required:!0},modal:{type:Boolean,required:!0},rentalContainers:{type:Boolean,required:!0},sumbitBtnText:{type:String,required:!0}},setup(){const e=F(),s=L(),o=x();return{returnCallShown:e,successShown:s,route:o}},data(){return{serviceOptionsShown:!1,branchOptionsShown:!1,formData:{service_id:"",city_id:"",phone:"",full_name:""},invalidInputMessages:{service_id:"",city_id:"",phone:"",full_name:""}}},computed:{services(){return this.rentalContainers?{25:"20DC",26:"20HC PW",27:"40HC",28:"40HC PW"}:{14:"Морские грузоперевозки",15:"Железнодорожные перевозки",16:"Автомобильные перевозки",17:"Авиаперевозки",24:"Проектная логистика",19:"Таможенное оформление",20:"Ответственное хранение",21:"Экспедирование грузов",18:"Доставка сборных грузов",22:"Страхование грузов",23:"Сертификация продукции"}},servicesIDs(){return Object.keys(this.services)},serviceChosen(){const{$texts:e}=v();return this.formData.service_id?this.services[this.formData.service_id]:this.rentalContainers?e.containerType:e.whichService},cities(){return{4:"Москва",2:"Владивосток",5:"Санкт-Петербург",3:"Новосибирск",7:"Хабаровск",8:"Уссурийск",6:"Находка"}},citiesIDs(){return[4,2,5,3,7,8,6]},cityChosen(){const{$texts:e}=v();return this.formData.city_id?this.cities[this.formData.city_id]:e.branch}},methods:{updateField(e,s){this.formData[s]=e},handleSubmit(){let e=!0;for(const[s,o]of Object.entries(this.formData)){const d=P(o,s);if(d){e=!1,this.invalidInputMessages[s]=d;const n=this.$watch(()=>this.formData[s],()=>this.clearError(s,n))}}e&&this.sendData()},clearError(e,s){this.invalidInputMessages[e]="",s()},clearData(){for(const e in this.formData)this.formData[e]=""},async sendData(){const{apiBase:e}=I(),s=Object.keys(this.route.query).length?this.route.query:null,o={...this.formData,query_params:s};this.successShown=!this.successShown,this.returnCallShown=!1;try{dataLayer&&dataLayer.push({event:"callback"}),await $fetch(`${e}/api/callback_request/submit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o),credentials:"include"}),this.clearData()}catch{this.clearData()}}}},b=e=>(B("data-v-f2e50809"),e=e(),N(),e),Q={class:"return-call"},Z={class:"return-call__fields"},G={class:"return-call__field"},K=["onClick"],X={class:"return-call__error"},Y={class:"return-call__field"},$=["onClick"],ee={class:"return-call__error"},te={class:"return-call__field"},se=["placeholder","value"],ne={class:"return-call__error"},re={class:"return-call__field"},ie=["placeholder","value"],ae={class:"return-call__error"},oe={class:"return-call__bottom"},le=b(()=>t("br",{class:"tablet-only"},null,-1)),ce=b(()=>t("br",{class:"desktop-only"},null,-1));function ue(e,s,o,d,n,i){const g=z,m=j,S=O("maska");return c(),u("div",Q,[o.modal?(c(),u("button",{key:0,class:"return-call__close",onClick:s[0]||(s[0]=r=>d.returnCallShown=!1)},[p(g,{alt:e.$texts.close},null,8,["alt"])])):M("",!0),t("h3",null,a(o.title),1),t("h5",null,a(e.$texts.willCall),1),t("div",Z,[t("div",G,[t("div",{class:_(["return-call__input",{gray:!n.formData.service_id}]),onClick:s[1]||(s[1]=r=>n.serviceOptionsShown=!n.serviceOptionsShown)},[l(a(i.serviceChosen)+" ",1),t("img",{src:w,class:_({rotated:n.serviceOptionsShown}),alt:""},null,2),t("ul",{class:_(["return-call__options",{options_shown:n.serviceOptionsShown}])},[(c(!0),u(f,null,k(i.servicesIDs,(r,h)=>(c(),u("li",{key:h,onClick:D=>i.updateField(r,"service_id")},a(i.services[r]),9,K))),128))],2)],2),t("div",X,a(n.invalidInputMessages.service_id),1)]),t("div",Y,[t("div",{class:_(["return-call__input",{gray:!n.formData.city_id}]),onClick:s[2]||(s[2]=r=>n.branchOptionsShown=!n.branchOptionsShown)},[l(a(i.cityChosen)+" ",1),t("img",{src:w,class:_({rotated:n.branchOptionsShown}),alt:""},null,2),t("ul",{class:_([{options_shown:n.branchOptionsShown},"return-call__options branch_options"])},[(c(!0),u(f,null,k(i.citiesIDs,(r,h)=>(c(),u("li",{key:h,onClick:D=>i.updateField(r,"city_id")},a(i.cities[r]),9,$))),128))],2)],2),t("div",ee,a(n.invalidInputMessages.city_id),1)]),t("div",te,[t("input",{class:"return-call__input",placeholder:e.$texts.name,value:n.formData.full_name,onInput:s[3]||(s[3]=r=>i.updateField(r.target.value,"full_name"))},null,40,se),t("div",ne,a(n.invalidInputMessages.full_name),1)]),t("div",re,[q(t("input",{class:"return-call__input",placeholder:e.$texts.phoneNumber,"data-maska":"+7 ### ###-##-##","data-maska-eager":"",value:n.formData.phone,onInput:s[4]||(s[4]=r=>i.updateField(r.target.value,"phone"))},null,40,ie),[[S]]),t("div",ae,a(n.invalidInputMessages.phone),1)])]),t("div",oe,[t("button",{class:"return-call__send animate-red",onClick:s[5]||(s[5]=(...r)=>i.handleSubmit&&i.handleSubmit(...r))},a(o.sumbitBtnText),1),t("p",null,[l(" Нажимая кнопку, Вы принимаете условия "),le,p(m,{to:"/eula",target:"_blank"},{default:y(()=>[l("пользовательского "),ce,l(" соглашения ")]),_:1}),l(" и "),p(m,{to:"/politika-konfidencialnosti",target:"_blank"},{default:y(()=>[l("политики конфиденциальности")]),_:1})])])])}const ke=C(A,[["render",ue],["__scopeId","data-v-f2e50809"]]);export{ke as _,z as a};
