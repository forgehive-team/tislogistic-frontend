import{a as k,e as D,b as v,u as x}from"./entry.f68164cd.js";import{m as c,F as u,H as t,y as p,N as I,I as o,Q as _,R as l,J as f,L as y,x as b,U as M,V as O}from"./swiper-vue.2993ddf4.js";import{_ as N}from"./nuxt-link.93954f67.js";import{a as B,c as q}from"./state.ba484c07.js";import{v as j}from"./validate.40c86f85.js";import{_ as g}from"./expand.901515da.js";const F={},P={width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},L=t("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),R=t("path",{d:"M30 18L18 30","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),T=t("path",{d:"M18 18L30 30","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),V=[L,R,T];function H(e,s){return c(),u("svg",P,V)}const A=k(F,[["render",H]]);const E={props:{title:{type:String,required:!0},modal:{type:Boolean,required:!0},rentalContainers:{type:Boolean,required:!0},sumbitBtnText:{type:String,required:!0}},setup(){const e=B(),s=q(),a=D();return{returnCallShown:e,successShown:s,route:a}},data(){return{serviceOptionsShown:!1,branchOptionsShown:!1,formData:{service_id:"",city_id:"",phone:"",full_name:""},invalidInputMessages:{service_id:"",city_id:"",phone:"",full_name:""}}},computed:{services(){return this.rentalContainers?{25:"20DC",26:"20HC PW",27:"40HC",28:"40HC PW"}:{29:"Multimodal transportation",30:"Terminal services",14:"Sea freight",15:"Railway freight",16:"Automobile transportation",17:"Air freight",24:"Project logistics",19:"Customs clearance",20:"Responsible storage",21:"Freight forwarding",18:"Delivery of bulk cargo",22:"Cargo insurance",23:"Product certification"}},servicesIDs(){return Object.keys(this.services)},serviceChosen(){const{$texts:e}=v();return this.formData.service_id?this.services[this.formData.service_id]:this.rentalContainers?e.containerType:e.whichService},cities(){return{4:"Moscow",2:"Vladivostok",5:"Saint Petersburg",3:"Novosibirsk",7:"Khabarovsk",8:"Ussuriysk",6:"Nakhodka"}},citiesIDs(){return[4,2,5,3,7,8,6]},cityChosen(){const{$texts:e}=v();return this.formData.city_id?this.cities[this.formData.city_id]:e.branch}},methods:{updateField(e,s){this.formData[s]=e},handleSubmit(){let e=!0;for(const[s,a]of Object.entries(this.formData)){const d=j(a,s);if(d){e=!1,this.invalidInputMessages[s]=d;const n=this.$watch(()=>this.formData[s],()=>this.clearError(s,n))}}e&&this.sendData()},clearError(e,s){this.invalidInputMessages[e]="",s()},clearData(){for(const e in this.formData)this.formData[e]=""},async sendData(){const{apiBase:e}=x(),s=Object.keys(this.route.query).length?this.route.query:null,a={...this.formData,query_params:s};this.successShown=!this.successShown,this.returnCallShown=!1;try{dataLayer&&dataLayer.push({event:"callback"}),await $fetch(`${e}/api/callback_request/submit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a),credentials:"include"}),this.clearData()}catch{this.clearData()}}}},w=e=>(M("data-v-c7993bd8"),e=e(),O(),e),J={class:"return-call"},U={class:"return-call__fields"},W={class:"return-call__field"},z=["onClick"],K={class:"return-call__error"},Q={class:"return-call__field"},Z=["onClick"],G={class:"return-call__error"},X={class:"return-call__field"},Y=["placeholder","value"],$={class:"return-call__error"},ee={class:"return-call__field"},te=["placeholder","value"],se={class:"return-call__error"},ne={class:"return-call__bottom"},re=w(()=>t("br",{class:"tablet-only"},null,-1)),ie=w(()=>t("br",{class:"desktop-only"},null,-1));function oe(e,s,a,d,n,i){const C=A,m=N;return c(),u("div",J,[a.modal?(c(),u("button",{key:0,class:"return-call__close",onClick:s[0]||(s[0]=r=>d.returnCallShown=!1)},[p(C,{alt:e.$texts.close},null,8,["alt"])])):I("",!0),t("h3",null,o(a.title),1),t("h5",null,o(e.$texts.willCall),1),t("div",U,[t("div",W,[t("div",{class:_(["return-call__input",{gray:!n.formData.service_id}]),onClick:s[1]||(s[1]=r=>n.serviceOptionsShown=!n.serviceOptionsShown)},[l(o(i.serviceChosen)+" ",1),t("img",{src:g,class:_({rotated:n.serviceOptionsShown}),alt:""},null,2),t("ul",{class:_(["return-call__options",{options_shown:n.serviceOptionsShown}])},[(c(!0),u(f,null,y(i.servicesIDs,(r,h)=>(c(),u("li",{key:h,onClick:S=>i.updateField(r,"service_id")},o(i.services[r]),9,z))),128))],2)],2),t("div",K,o(n.invalidInputMessages.service_id),1)]),t("div",Q,[t("div",{class:_(["return-call__input",{gray:!n.formData.city_id}]),onClick:s[2]||(s[2]=r=>n.branchOptionsShown=!n.branchOptionsShown)},[l(o(i.cityChosen)+" ",1),t("img",{src:g,class:_({rotated:n.branchOptionsShown}),alt:""},null,2),t("ul",{class:_([{options_shown:n.branchOptionsShown},"return-call__options branch_options"])},[(c(!0),u(f,null,y(i.citiesIDs,(r,h)=>(c(),u("li",{key:h,onClick:S=>i.updateField(r,"city_id")},o(i.cities[r]),9,Z))),128))],2)],2),t("div",G,o(n.invalidInputMessages.city_id),1)]),t("div",X,[t("input",{class:"return-call__input",placeholder:e.$texts.name,value:n.formData.full_name,onInput:s[3]||(s[3]=r=>i.updateField(r.target.value,"full_name"))},null,40,Y),t("div",$,o(n.invalidInputMessages.full_name),1)]),t("div",ee,[t("input",{class:"return-call__input",placeholder:e.$texts.phoneNumber,value:n.formData.phone,onInput:s[4]||(s[4]=r=>i.updateField(r.target.value,"phone"))},null,40,te),t("div",se,o(n.invalidInputMessages.phone),1)])]),t("div",ne,[t("button",{class:"return-call__send animate-red",onClick:s[5]||(s[5]=(...r)=>i.handleSubmit&&i.handleSubmit(...r))},o(a.sumbitBtnText),1),t("p",null,[l(" By clicking the button, you accept the terms of "),re,p(m,{to:"/eula",target:"_blank"},{default:b(()=>[l("user "),ie,l(" agreement ")]),_:1}),l(" and "),p(m,{to:"/privacy-policy",target:"_blank"},{default:b(()=>[l("privacy policy")]),_:1})])])])}const he=k(E,[["render",oe],["__scopeId","data-v-c7993bd8"]]);export{he as _,A as a};
