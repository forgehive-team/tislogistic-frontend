{"version":3,"file":"CompanyPresentation-9c0cc7e3.js","sources":["../../../../components/Icons/EmailIcon.vue","../../../../components/Home/CompanyPresentation.vue"],"sourcesContent":["<template>\n    <svg\n        width=\"18\"\n        height=\"14\"\n        viewBox=\"0 0 18 14\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n    >\n        <path\n            fill-rule=\"evenodd\"\n            clip-rule=\"evenodd\"\n            d=\"M0.5 4C0.5 2.067 2.067 0.5 4 0.5H14C15.933 0.5 17.5 2.067 17.5 4V10C17.5 11.933 15.933 13.5 14 13.5H4C2.067 13.5 0.5 11.933 0.5 10V4ZM10.4287 6.96711C9.5701 7.56509 8.4299 7.56509 7.57127 6.96711L1.74853 2.91199C2.15311 2.07632 3.00925 1.5 4 1.5H14C14.9907 1.5 15.8469 2.07632 16.2515 2.91199L10.4287 6.96711ZM11.0002 7.78772C9.79814 8.62489 8.20186 8.62489 6.99977 7.78772L1.5 4V10C1.5 11.3807 2.61929 12.5 4 12.5H14C15.3807 12.5 16.5 11.3807 16.5 10V4L11.0002 7.78772Z\"\n            fill=\"currentColor\"\n        />\n    </svg>\n</template>\n","<template>\r\n    <div class=\"presentation\">\r\n        <div class=\"presentation__content\">\r\n            <h2 class=\"presentation__title\">{{ $texts.presentationTitle }}</h2>\r\n            <p class=\"presentation__text\">\r\n                {{ $texts.presentationDescription }}\r\n            </p>\r\n            <div class=\"btns-container\">\r\n                <div class=\"input-container\">\r\n                    <IconsEmailIcon />\r\n                    <input v-model=\"email\" :placeholder=\"$texts.email\" />\r\n                </div>\r\n                <button @click=\"handleSubmit\">\r\n                    Отправить\r\n                    <IconsArrowRight />\r\n                </button>\r\n            </div>\r\n            <p class=\"error\">{{ errorMessage }}</p>\r\n        </div>\r\n\r\n        <nuxt-img\r\n            class=\"presentation__img\"\r\n            format=\"webp\"\r\n            quality=\"100\"\r\n            sizes=\"sm:0px md:0px lg:500px xl:700px xxl:700px 2xl:700px\"\r\n            src=\"images/notepad.png\"\r\n            :alt=\"$texts.presentationTitle + ' ' + $texts.companyName\"\r\n        />\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport validate from '~~/helpers/validate';\r\nconst showSuccess = useSuccessModal();\r\nconst email = ref('');\r\nconst errorMessage = ref('');\r\n\r\nconst { newsApiBase } = useRuntimeConfig();\r\nconst url = newsApiBase + 'send-presentation';\r\n\r\nconst sendData = async () => {\r\n    const route = useRoute();\r\n    const queryParams = route.query;\r\n    const data = {\r\n        email: email.value,\r\n        query_params: Object.keys(queryParams).length ? queryParams : null,\r\n    };\r\n    showSuccess.value = !showSuccess.value;\r\n    try {\r\n        if (dataLayer) {\r\n            dataLayer.push({ event: 'form_presentation' });\r\n        }\r\n        await $fetch(url, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(data),\r\n            credentials: 'include',\r\n        });\r\n        email.value = '';\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n};\r\n\r\nconst clearError = (unwatch) => {\r\n    errorMessage.value = '';\r\n    unwatch();\r\n};\r\n\r\nconst handleSubmit = () => {\r\n    const errMessage = validate(email.value, 'email');\r\n    if (errMessage) {\r\n        errorMessage.value = errMessage;\r\n        const unwatch = watch(\r\n            () => email.value,\r\n            () => clearError(unwatch)\r\n        );\r\n        return;\r\n    }\r\n    sendData();\r\n};\r\n</script>\r\n\r\n<style\r\n    src=\"@/assets/scss/components/Home/CompanyPresentation.scss\"\r\n    lang=\"scss\"\r\n    scoped\r\n></style>\r\n"],"names":["_ssrRenderAttrs","_mergeProps"],"mappings":";;;;;;;;;;AAEQ,QAAA,OAAUA,eAAAC,WAAA;AAAA,IACV;IACA;IACA,SAAW;AAAA,IACX;;;;;;;;;;;;;;;;AC2BR,oBAAA;AACA,UAAA,QAAA,IAAA,EAAA;AACA,UAAA,eAAA,IAAA,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}